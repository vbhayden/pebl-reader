var globalPebl="object"==typeof globalPebl?globalPebl:{};globalPebl.extension=globalPebl.extension||{},globalPebl.extension.PeblRatingsWidget=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=4)}([function(e,t){e.exports=Vue},function(e,t,r){var a=r(2);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r(5).default)("917b5598",a,!0,{})},function(e,t,r){(e.exports=r(3)(!1)).push([e.i,".ratingContainer{display:inline-block;vertical-align:middle;font-family:var(--font-family-secondary);width:100%}.ratingWrapper{padding-top:2rem;display:inline-block;clear:both;width:calc(100% - 2px)}.ratingWrapper p{font-family:var(--font-family-primary) !important}.ratingContainer label{display:block;position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.ratingContainer [type=\"radio\"]{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:inline-block;position:relative;background-color:var(--background-darker);color:#fff;height:40px;width:40px;border:0;border-radius:50px;cursor:pointer;margin:0.5em;outline:none}.ratingContainer .rateUp:before{opacity:0.8;content:url(\"data:image/svg+xml,%3Csvg fill='%23ffffff' width='24' height='24' viewBox='0 0 1792 1792' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M320 1344q0-26-19-45t-45-19q-27 0-45.5 19t-18.5 45q0 27 18.5 45.5t45.5 18.5q26 0 45-18.5t19-45.5zm160-512v640q0 26-19 45t-45 19h-288q-26 0-45-19t-19-45v-640q0-26 19-45t45-19h288q26 0 45 19t19 45zm1184 0q0 86-55 149 15 44 15 76 3 76-43 137 17 56 0 117-15 57-54 94 9 112-49 181-64 76-197 78h-129q-66 0-144-15.5t-121.5-29-120.5-39.5q-123-43-158-44-26-1-45-19.5t-19-44.5v-641q0-25 18-43.5t43-20.5q24-2 76-59t101-121q68-87 101-120 18-18 31-48t17.5-48.5 13.5-60.5q7-39 12.5-61t19.5-52 34-50q19-19 45-19 46 0 82.5 10.5t60 26 40 40.5 24 45 12 50 5 45 .5 39q0 38-9.5 76t-19 60-27.5 56q-3 6-10 18t-11 22-8 24h277q78 0 135 57t57 135z'/%3E%3C/svg%3E\");position:absolute;top:8px;left:8px}.ratingContainer .rateDown:before{opacity:0.8;content:url(\"data:image/svg+xml,%3Csvg fill='%23ffffff' width='24' height='24' viewBox='0 0 1792 1792' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M320 576q0 26-19 45t-45 19q-27 0-45.5-19t-18.5-45q0-27 18.5-45.5t45.5-18.5q26 0 45 18.5t19 45.5zm160 512v-640q0-26-19-45t-45-19h-288q-26 0-45 19t-19 45v640q0 26 19 45t45 19h288q26 0 45-19t19-45zm1129-149q55 61 55 149-1 78-57.5 135t-134.5 57h-277q4 14 8 24t11 22 10 18q18 37 27 57t19 58.5 10 76.5q0 24-.5 39t-5 45-12 50-24 45-40 40.5-60 26-82.5 10.5q-26 0-45-19-20-20-34-50t-19.5-52-12.5-61q-9-42-13.5-60.5t-17.5-48.5-31-48q-33-33-101-120-49-64-101-121t-76-59q-25-2-43-20.5t-18-43.5v-641q0-26 19-44.5t45-19.5q35-1 158-44 77-26 120.5-39.5t121.5-29 144-15.5h129q133 2 197 78 58 69 49 181 39 37 54 94 17 61 0 117 46 61 43 137 0 32-15 76z'/%3E%3C/svg%3E\");position:absolute;top:8px;left:8px}.ratingContainer [type=\"radio\"]:checked:before{opacity:1;position:absolute;transform:rotate(0deg)}.ratingContainer .rateUp:hover{background-color:var(--success-color)}.ratingContainer .rateUp:checked{background-color:var(--success-color)}.ratingContainer .rateDown:hover{background-color:var(--alert-color)}.ratingContainer .rateDown:checked{background-color:var(--alert-color)}.ratingContainer .rateUp:focus:before{animation:rateIconUp 0.5s}@keyframes rateIconUp{66%{transform:scale(1.5) rotate(-40deg)}100%{transform:scale(1) rotate(0deg)}}.ratingContainer .rateDown:focus:before{animation:rateIconDown 0.5s}.ratingNegativeFeedbackWrapper{max-height:calc(70vh - 105px);width:calc(100% - 2px);break-inside:avoid-column;-webkit-column-break-inside:avoid}.showFeedbackCallout{display:block}.hideFeedbackCallout{display:none}.ratingNegativeFeedbackCallout{background-color:var(--background-lighter);width:calc(100% - 2px);margin:0;clear:both;overflow:hidden;break-inside:avoid-column;-webkit-column-break-inside:avoid;color:#000000;font-weight:bold}.ratingNegativeFeedbackCallout label{font-weight:500}.ratingNegativeFeedbackCallout .checkBox{padding:.5rem}.ratingNegativeFeedbackCallout p{margin:0;padding:0}.ratingNegativeFeedbackCallout form>.textBox{padding-right:1em;padding-left:1em;margin-bottom:1em}.ratingNegativeFeedbackFooter{border-top:1px solid var(--background-darker);display:flex;align-items:center;justify-content:space-around;width:100%;min-height:10px;margin-top:var(--spacing-s);padding:var(--spacing-s);order:3}.ratingNegativeFeedbackFooter>button{width:100%}.ratingNegativeFeedbackFooter>div:hover,.ratingNegativeFeedbackFooter>div.active,.ratingNegativeFeedbackFooter>button:hover{background:var(--primary-color-dark)}p.thanksFeedback{margin:5em;text-align:center}.ratingsCfiPlaceholder{margin:0 !important;padding:0 !important;color:transparent !important;font-size:2px !important;line-height:0 !important}@keyframes rateIconDown{66%{transform:scale(1.5) rotate(40deg)}100%{transform:scale(1) rotate(0deg)}}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",a=e[3];if(!a)return r;if(t&&"function"==typeof btoa){var n=(o=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),i=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[r].concat(i).concat([n]).join("\n")}var o;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(a[i]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&a[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t,r){"use strict";r.r(t),r.d(t,"insertExtensions",(function(){return c})),r.d(t,"createRating",(function(){return d}));r(1);var a=r(0),n=r.n(a);var i=function(e,t,r,a,n,i,o,s){var c=typeof(e=e||{}).default;"object"!==c&&"function"!==c||(e=e.default);var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId=i),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=d):n&&(d=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),d)if(l.functional){l._injectStyles=d;var u=l.render;l.render=function(e,t){return d.call(t),u(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:l}}(n.a.extend({name:"Widget",props:["globalPebl","globalReadium","insertID","idref","ratingText","negativeRatingPrompt","propertiesObject"],mounted(){},computed:{},data:()=>({showNegativeFeedback:!1,discussFurther:!1,feedbackText:"",feedbackSuccess:!1}),methods:{rateUp:function(){this.showNegativeFeedback=!1,this.globalPebl.emitEvent(this.globalPebl.events.eventLiked,{name:this.idref,activityId:this.insertID,activityType:"rating"})},rateDown:function(){this.showNegativeFeedback=!0,this.globalPebl.emitEvent(this.globalPebl.events.eventDisliked,{name:this.idref,activityId:this.insertID,activityType:"rating"})},submitFeedback:function(){if(this.feedbackText.trim().length>0){let e="No";this.discussFurther&&(e="Yes"),this.globalPebl.emitEvent(this.globalPebl.events.eventModuleFeedback,{idref:this.idref,feedback:this.feedbackText,willingToDiscuss:e,activityType:"rating",activityId:this.insertID}),this.feedbackSuccess=!0,this.feedbackText="",this.discussFurther=!1}else window.alert("Please enter some feedback first.")},resetFeedback:function(){this.feedbackSuccess=!1}}}),(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{"data-theme-target":e.insertID,contenteditable:"false","data-propertiesobject":e.propertiesObject}},[r("div",{staticClass:"ratingWrapper"},[r("h2",[e._v("Feedback")]),e._v(" "),r("p",[e._v(e._s(e.ratingText?e.ratingText:"Please rate this section:"))]),e._v(" "),r("div",{staticClass:"ratingContainer"},[r("label",{attrs:{for:"ratingGroup1_up"}},[e._v("Thumbs Up")]),e._v(" "),r("input",{staticClass:"ratingButton rateUp",attrs:{type:"radio",id:"ratingGroup1_up",name:"ratingGroup1"},on:{click:e.rateUp}}),e._v(" "),r("label",{attrs:{for:"ratingGroup1_down"}},[e._v("Thumbs Down")]),e._v(" "),r("input",{staticClass:"ratingButton rateDown",attrs:{type:"radio",id:"ratingGroup1_down",name:"ratingGroup1"},on:{click:e.rateDown}}),e._v(" "),e.showNegativeFeedback?r("div",{staticClass:"ratingNegativeFeedbackWrapper"},[r("div",{staticClass:"ratingNegativeFeedbackCallout"},[e.feedbackSuccess?e._e():r("form",[r("div",{staticClass:"textBox"},[r("div",{staticClass:"textInput"},[r("span",{attrs:{id:"textDetailText"}},[e._v(e._s(e.negativeRatingPrompt?e.negativeRatingPrompt:"What Feedback would you like to share about this section?"))]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedbackText,expression:"feedbackText"}],staticClass:"edit",domProps:{value:e.feedbackText},on:{input:function(t){t.target.composing||(e.feedbackText=t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"checkBox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.discussFurther,expression:"discussFurther"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.discussFurther)?e._i(e.discussFurther,null)>-1:e.discussFurther},on:{change:function(t){var r=e.discussFurther,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=e._i(r,null);a.checked?i<0&&(e.discussFurther=r.concat([null])):i>-1&&(e.discussFurther=r.slice(0,i).concat(r.slice(i+1)))}else e.discussFurther=n}}}),e._v(" "),r("span",[e._v("I'm willing to discuss this further.")])])]),e._v(" "),e.feedbackSuccess?r("p",{staticClass:"thanksFeedback"},[e._v("Thanks for your feedback.")]):e._e(),e._v(" "),r("div",{staticClass:"ratingNegativeFeedbackFooter"},[e.feedbackSuccess?e._e():r("button",{on:{click:e.submitFeedback}},[e._v("Submit")]),e._v(" "),e.feedbackSuccess?r("button",{on:{click:e.resetFeedback}},[e._v("Submit more feedback")]):e._e()])])]):e._e()])])])}),[],!1,null,null,null).exports,o=window.parent&&window.parent.PeBL?window.parent.PeBL:window.PeBL?window.PeBL:null,s=window.parent.READIUM;function c(){jQuery('.ratingsExtension, .peblExtension[data-peblextension="ratings"]').each((function(){var e=this.getAttribute("id"),t=this.getAttribute("id");d('[id="'+t+'"]',t,e,this.hasAttribute("data-ratingText")?this.getAttribute("data-ratingText"):this.getAttribute("data-ratingtext"),this.hasAttribute("data-negativeRatingPrompt")?this.getAttribute("data-negativeRatingPrompt"):this.getAttribute("data-negativeratingprompt"),this.hasAttribute("data-propertiesobject")?this.getAttribute("data-propertiesobject"):void 0)}))}function d(e,t,r,a,c,d){new n.a({el:e,render:e=>e(i,{props:{globalPebl:o,globalReadium:s,insertID:t,idref:r,ratingText:a,negativeRatingPrompt:c,propertiesObject:d}})})}jQuery(document).ready(()=>{window.parent.PeBLConfig&&window.parent.PeBLConfig.isAuthoring?document.addEventListener("pebleditorready",()=>{c()}):c()})},function(e,t,r){"use strict";function a(e,t){for(var r=[],a={},n=0;n<t.length;n++){var i=t[n],o=i[0],s={id:e+":"+n,css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):r.push(a[o]={id:o,parts:[s]})}return r}r.r(t),r.d(t,"default",(function(){return f}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=n&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,d=!1,l=function(){},u=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,r,n){d=r,u=n||{};var o=a(e,t);return g(o),function(t){for(var r=[],n=0;n<o.length;n++){var s=o[n];(c=i[s.id]).refs--,r.push(c)}t?g(o=a(e,t)):o=[];for(n=0;n<r.length;n++){var c;if(0===(c=r[n]).refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete i[c.id]}}}}function g(e){for(var t=0;t<e.length;t++){var r=e[t],a=i[r.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](r.parts[n]);for(;n<r.parts.length;n++)a.parts.push(b(r.parts[n]));a.parts.length>r.parts.length&&(a.parts.length=r.parts.length)}else{var o=[];for(n=0;n<r.parts.length;n++)o.push(b(r.parts[n]));i[r.id]={id:r.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function b(e){var t,r,a=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(a){if(d)return l;a.parentNode.removeChild(a)}if(p){var n=c++;a=s||(s=v()),t=k.bind(null,a,n,!1),r=k.bind(null,a,n,!0)}else a=v(),t=y.bind(null,a),r=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else r()}}var h,m=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function k(e,t,r,a){var n=r?"":a.css;if(e.styleSheet)e.styleSheet.cssText=m(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function y(e,t){var r=t.css,a=t.media,n=t.sourceMap;if(a&&e.setAttribute("media",a),u.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}}]);