var globalPebl="object"==typeof globalPebl?globalPebl:{};globalPebl.extension=globalPebl.extension||{},globalPebl.extension.PeblAskExpertWidget=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=4)}([function(t,e){t.exports=Vue},function(t,e,r){var n=r(2);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(5).default)("917b5598",n,!0,{})},function(t,e,r){(t.exports=r(3)(!1)).push([t.i,".askContainer{height:100%;-webkit-box-shadow:rgba(0,0,0,0.137255) 0px 4px 5px 0px,rgba(0,0,0,0.117647) 0px 1px 10px 0px,rgba(0,0,0,0.298039) 0px 2px 4px -1px;box-shadow:rgba(0,0,0,0.137255) 0px 4px 5px 0px,rgba(0,0,0,0.117647) 0px 1px 10px 0px,rgba(0,0,0,0.298039) 0px 2px 4px -1px;width:100%;position:fixed;top:0;left:0;z-index:5000}.responsive-wrapper{position:relative;height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.askFrame{position:absolute;top:0;left:0;width:100%;height:100% !important;margin:0;padding:0;border:none}.askExpertCloseButton{position:fixed;top:0.25em;right:1em;z-index:5001;font-size:2em;cursor:pointer}.askExpertButton{background-color:var(--primary-color) !important;width:240px;margin-top:.5rem;padding:.5rem;font-weight:500;border:none;color:#fff !important;cursor:pointer;text-align:center}.askExpertButton:hover{background-color:var(--primary-color-dark) !important}.askExpertExpertsModal{position:fixed;top:10vh;left:0;right:0;min-height:400px;height:80vh;background-color:var(--background-light);z-index:5000;box-shadow:var(--boxshadow-2);max-width:700px;margin:0 auto;display:flex;flex-direction:column;-webkit-box-shadow:0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12),0 2px 4px -1px rgba(0,0,0,0.3);box-shadow:0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12),0 2px 4px -1px rgba(0,0,0,0.3)}.askExpertExpertsModalHeader{display:flex;background-color:var(--primary-color-light);justify-content:space-between;align-items:center;color:#fff;padding:1em;font-size:1rem;font-family:var(--font-family-secondary)}.askExpertExpertsModalBody{overflow:auto;-webkit-overflow-scrolling:touch}.askExpertExpertsModalCloseButton{width:1em;height:1em;font-size:1.5em;display:flex;align-items:center;justify-content:center;cursor:pointer}.askExpertExpertContainer{display:flex;flex-direction:column;padding:1em;cursor:pointer}.askExpertExpertContainer:hover{background-color:var(--primary-color)}.askExpertExpertContainer:hover span{color:white !important}.askExpertExpertName{font-family:var(--font-family-secondary)}.askExpertExpertDescription{font-family:var(--font-family-secondary);color:var(--dark-font);font-style:italic}.askExpertExpertsModalDescription{padding:1em}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[r].concat(i).concat([o]).join("\n")}var a;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){"use strict";r.r(e),r.d(e,"insertExtensions",(function(){return d})),r.d(e,"createAskExpertButton",(function(){return u}));r(1);var n=r(0),o=r.n(n),i=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};function a(t,e,r,n,o,i,a,s){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var p,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=r,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId=i),a?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=p):o&&(p=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),p)if(d.functional){d._injectStyles=p;var u=d.render;d.render=function(t,e){return p.call(e),u(t,e)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,p):[p]}return{exports:t,options:d}}var s=a(o.a.extend({name:"Popup",props:["globalPebl","insertID","experts","mailto","mailtoSubject","mailtoBody"],mounted(){return i(this,void 0,void 0,(function*(){this.globalPebl.emitEvent(this.globalPebl.events.eventDisplayed,{activityType:"ask-expert",activityId:this.insertID,type:"expert"}),yield this.globalPebl.user.getUser(t=>{t&&(this.userProfile=t)})}))},computed:{enabledExperts:function(){return this.experts.filter(t=>!!t.enabled)}},data:()=>({brTag:"<br/>",userProfile:null}),methods:{closeAskExpertModal:function(){this.globalPebl.emitEvent(this.globalPebl.events.eventUndisplayed,{activityType:"ask-expert",activityId:this.insertID,type:"expert"}),jQuery("#askExpertExpertsModal").remove(),this.$destroy()},getExpertThread:function(t){return this.userProfile.id+"_"+t},handleExpertClick:function(t,e){if(e.email){let t=document.createElement("form");t.setAttribute("style","display: none;"),t.target="_blank";let r="mailto:";e.email&&(r+=e.email+"?"),this.mailtoSubject&&(r+="subject="+encodeURI(this.mailtoSubject)),this.mailtoBody&&(r+="&body="+encodeURI(this.mailtoBody)),t.action=r,t.method="post",document.body.appendChild(t),t.submit(),document.body.removeChild(t)}else e.phone?window.open("tel:+"+e.phone,"_blank"):e.url?(e.url.match(/^http?:\/\//i)&&e.url.match(/^https?:\/\//i)||(e.url="http://"+e.url),window.open(e.url,"_blank")):PeblDiscussionWidget.handleChatButtonClick(t.target,{prompt:"Message "+e.name});this.globalPebl.emitEvent(this.globalPebl.events.eventAccessed,{name:e.name,description:e.description,type:"expert",activityType:"ask-expert",activityId:this.insertID})}}}),(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"askExpertExpertsModal peblModal",attrs:{"data-theme-target":t.insertID,id:"askExpertExpertsModal"}},[r("div",{staticClass:"askExpertExpertsModalHeader"},[r("span",{staticClass:"askExpertExpertsModalHeaderText"},[t._v("Ask an Expert")]),t._v(" "),r("i",{staticClass:"fa fa-times askExpertExpertsModalCloseButton",on:{click:t.closeAskExpertModal}})]),t._v(" "),r("div",{staticClass:"askExpertExpertsModalBody"},[r("p",{staticClass:"askExpertExpertsModalDescription"},[t._v("Have questions about the material? Ask an expert here.")]),t._v(" "),t._l(t.enabledExperts,(function(e){return r("div",{key:e,staticClass:"askExpertExpertContainer",attrs:{detailText:"Your messages with this expert will not be visible by any other users.",id:t.getExpertThread(e.id)},on:{click:function(r){return t.handleExpertClick(r,e)}}},[r("span",{staticClass:"askExpertExpertName"},[r("i",{staticClass:"fa askExpertIcon",class:{"fa-envelope":e.email,"fa-phone":e.phone,"fa-external-link-alt":e.url}}),t._v("\n                "+t._s(" "+e.name)+"\n            ")]),t._v(" "),e.description?r("span",{staticClass:"askExpertExpertDescription"},[t._v(t._s(e.description))]):t._e()])}))],2)])}),[],!1,null,null,null).exports,l=a(o.a.extend({name:"Widget",props:["globalPebl","insertID","buttonText","experts","mailto","mailtoRecipient","mailtoSubject","mailtoBody"],mounted(){},computed:{},data:()=>({brTag:"<br/>"}),methods:{createAskExpertModal:function(){let t=this.globalPebl.utils.getUuid(),e=document.createElement("div");e.id=t,document.body.appendChild(e),new o.a({el:'[id="'+t+'"]',render:t=>t(s,{props:{globalPebl:this.globalPebl,insertID:this.insertID,experts:this.experts,mailto:this.mailto,mailtoSubject:this.mailtoSubject,mailtoBody:this.mailtoBody}})})},handleAskExpertClick:function(){if(this.mailto&&"true"===this.mailto){let t=document.createElement("form");t.setAttribute("style","display:none;"),t.target="_blank";let e="mailto:";this.mailtoRecipient&&(e+=this.mailtoRecipient+"?"),this.mailtoSubject&&(e+="subject="+encodeURI(this.mailtoSubject)),this.mailtoBody&&(e+="&body="+encodeURI(this.mailtoBody)),t.action=e,t.method="post",document.body.appendChild(t),t.submit(),document.body.removeChild(t)}else this.experts&&this.createAskExpertModal()}}}),(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{"data-theme-target":this.insertID,contenteditable:"false","data-propertiesobject":this.propertiesObject}},[e("button",{staticClass:"askExpertButton",on:{click:this.handleAskExpertClick}},[this._v(this._s(this.buttonText))])])}),[],!1,null,null,null).exports,p=window.parent&&window.parent.PeBL?window.parent.PeBL:window.PeBL?window.PeBL:null;function d(){jQuery('.peblExtension[data-peblextension="askExpert"], .peblExtension[data-peblExtension="askExpert"]').each((function(){var t=this.getAttribute("id");u('[id="'+t+'"]',t,this.getAttribute("data-buttonText")||this.getAttribute("data-buttontext"),this.hasAttribute("data-experts")?JSON.parse(this.getAttribute("data-experts")):null,this.hasAttribute("data-mailto")?this.getAttribute("data-mailto"):"false",this.getAttribute("data-mailtoRecipient")||this.getAttribute("data-mailtorecipient")||void 0,this.getAttribute("data-mailtoSubject")||this.getAttribute("data-mailtosubject")||void 0,this.getAttribute("data-mailtoBody")||this.getAttribute("data-mailtobody")||void 0,this.hasAttribute("data-propertiesobject")?this.getAttribute("data-propertiesobject"):void 0)}))}function u(t,e,r,n,i,a,s,d,u){new o.a({el:t,render:t=>t(l,{props:{globalPebl:p,insertID:e,buttonText:r,experts:n,mailto:i,mailtoRecipient:a,mailtoSubject:s,mailtoBody:d,propertiesObject:u}})})}jQuery(document).ready(()=>{window.parent.PeBLConfig&&window.parent.PeBLConfig.isAuthoring?document.addEventListener("pebleditorready",()=>{d()}):d()}),jQuery(document).mouseup(t=>{var e=jQuery(".peblModal");e.is(t.target)||0!==e.has(t.target).length||e.remove()})},function(t,e,r){"use strict";function n(t,e){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],a=i[0],s={id:t+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}r.r(e),r.d(e,"default",(function(){return f}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,p=!1,d=function(){},u=null,c="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,r,o){p=r,u=o||{};var a=n(t,e);return h(a),function(e){for(var r=[],o=0;o<a.length;o++){var s=a[o];(l=i[s.id]).refs--,r.push(l)}e?h(a=n(t,e)):a=[];for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete i[l.id]}}}}function h(t){for(var e=0;e<t.length;e++){var r=t[e],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(b(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(b(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:a}}}}function x(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function b(t){var e,r,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(p)return d;n.parentNode.removeChild(n)}if(c){var o=l++;n=s||(s=x()),e=v.bind(null,n,o,!1),r=v.bind(null,n,o,!0)}else n=x(),e=y.bind(null,n),r=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else r()}}var m,g=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function v(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=g(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function y(t,e){var r=e.css,n=e.media,o=e.sourceMap;if(n&&t.setAttribute("media",n),u.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}}]);